(function(){var b="";var e=",";var d="-";var c=".";var g="+";var a=" ";var f="<span>";var h="</span>";AUI.add("liferay-calendar-simple-menu",function(j){var i=j.Array;var m=j.Lang;var k=j.getClassName;var n=m.isArray;var p=j.Object.owns;var l=k("simple-menu","item");var q=k("simple-menu","item","hidden");var t=k("simple-menu","separator");var r='<li class="{cssClass}" data-id="{id}">{caption}</li>';var s=j.cached(function(w,u){var v=null;i.some(u,function(y,x,z){if(y.id===w){v=y;return true}});return(v&&v.fn)});var o=j.Component.create({ATTRS:{hiddenItems:{validator:n,value:[]},host:{value:null},items:{validator:n,value:[]}},AUGMENTS:[j.WidgetStdMod,j.WidgetPosition,j.WidgetStack,j.WidgetPositionAlign,j.WidgetPositionConstrain],NAME:"simple-menu",UI_ATTRS:["hiddenItems","items"],prototype:{CONTENT_TEMPLATE:"<ul></ul>",renderUI:function(){var u=this;u.get("boundingBox").unselectable();u._renderItems(u.get("items"))},bindUI:function(){var u=this;var v=u.get("contentBox");v.delegate("click",u._onClickItems,c+l,u);j.getDoc().on("click",u._onClickDocument,u)},_onClickDocument:function(){var u=this;u.hide()},_onClickItems:function(x){var u=this;x.stopPropagation();var v=u.get("items");var y=x.currentTarget.attr("data-id");var w=s(y,v);if(w){w.apply(u,arguments)}},_renderItems:function(w){var u=this;var v=u.get("contentBox");var x=u.get("hiddenItems");u.items=j.NodeList.create();i.each(w,function(C,B,D){var A=C.caption;if(!p(C,"id")){C.id=j.guid()}var E=C.id;var z=l;if(A==d){z=t}if(i.indexOf(x,E)>-1){z+=a+q}if(C.cssClass){z+=a+C.cssClass}var y=j.Node.create(m.sub(r,{cssClass:z,id:E}));y.setContent(A);u.items.push(y)});v.setContent(u.items)},_uiSetHiddenItems:function(v){var u=this;if(u.get("rendered")){u.items.each(function(x,w,y){var z=x.attr("data-id");x.toggleClass(q,(i.indexOf(v,z)>-1))})}},_uiSetItems:function(v){var u=this;if(u.get("rendered")){u._renderItems(v)}}}});Liferay.SimpleMenu=o},"",{requires:["aui-base","aui-template-deprecated","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"]});AUI.add("liferay-calendar-list",function(v){var z=v.Array;var j=v.Lang;var r=j.isArray;var p=j.isObject;var m=v.getClassName;var n="calendar-list";var k="item";var w=m(n,"empty","message");var x=m(n,k);var s=m(n,k,"active");var l=m(n,k,"arrow");var y=m(n,k,"color");var i=m(n,k,"hover");var u=m(n,k,"label");var q='<div class="'+w+'">{message}</div>';var t=new v.Template('<tpl for="calendars">','<div class="',x,'">','<div class="',y,'" {[ parent.calendars[$i].get("visible") ? ',"'style=\"background-color:'",g,'parent.calendars[$i].get("color")',g,'";border-color:"',g,'parent.calendars[$i].get("color")',g,'";\\""'," : '",b,"' ]}></div>",'<span class="',u,'">{[ Liferay.Util.escapeHTML(parent.calendars[$i].getDisplayName()) ]}</span>','<div href="javascript:;" class="',l,'"></div>',"</div>","</tpl>");var o=v.Component.create({ATTRS:{calendars:{setter:"_setCalendars",validator:r,value:[]},scheduler:{},simpleMenu:{setter:"_setSimpleMenu",validator:p,value:null},strings:{value:{emptyMessage:'\u004e\u006f\u0020\u0063\u0061\u006c\u0065\u006e\u0064\u0061\u0072\u0073\u0020\u0073\u0065\u006c\u0065\u0063\u0074\u0065\u0064\u002e'}}},NAME:"calendar-list",UI_ATTRS:["calendars"],prototype:{initializer:function(){var A=this;var B=A.get("strings.emptyMessage");A.emptyMessageNode=v.Node.create(j.sub(q,{message:B}));A.simpleMenu=new Liferay.SimpleMenu(A.get("simpleMenu"))},renderUI:function(){var A=this;A._renderCalendars();A.simpleMenu.render()},bindUI:function(){var A=this;var B=A.get("contentBox");A.on("scheduler-calendar:colorChange",A._onCalendarColorChange,A);A.on("scheduler-calendar:visibleChange",A._onCalendarVisibleChange,A);A.on("simple-menu:visibleChange",A._onSimpleMenuVisibleChange,A);B.delegate("click",A._onClick,c+x,A);B.delegate("hover",v.bind(A._onHoverOver,A),v.bind(A._onHoverOut,A),c+x)},add:function(B){var A=this;var C=A.get("calendars");C.push(B);A.set("calendars",C)},clear:function(){var A=this;A.set("calendars",[])},getCalendar:function(C){var A=this;var F=A.get("calendars");var E=null;for(var B=0;B<F.length;B++){var D=F[B];if(D.get("calendarId")===C){E=D;break}}return E},getCalendarByNode:function(B){var A=this;var C=A.get("calendars");return C[A.items.indexOf(B)]},getCalendarNode:function(B){var A=this;var C=A.get("calendars");return A.items.item(z.indexOf(C,B))},remove:function(C){var A=this;var D=A.get("calendars");if(D.length>0){var B=z.indexOf(D,C);if(B>-1){z.remove(D,B)}}A.set("calendars",D)},_clearCalendarColor:function(D){var A=this;var C=A.getCalendarNode(D);var B=C.one(c+y);B.setAttribute("style",b)},_onCalendarColorChange:function(B){var A=this;var C=B.target;if(C.get("visible")){A._setCalendarColor(C,B.newVal)}},_onCalendarVisibleChange:function(B){var A=this;var C=B.target;if(B.newVal){A._setCalendarColor(C,C.get("color"))}else{A._clearCalendarColor(C)}},_onClick:function(C){var A=this;var E=C.target;if(E.hasClass(l)){C.stopPropagation();var F=A.activeNode;if(F){F.removeClass(s)}F=C.currentTarget;A.activeItem=A.getCalendarByNode(F);F.addClass(s);A.activeNode=F;var B=A.simpleMenu;B.setAttrs({"align.node":E,visible:((B.get("align.node")!==E)||!B.get("visible"))})}else{var D=A.getCalendarByNode(C.currentTarget);D.set("visible",!D.get("visible"))}},_onHoverOver:function(B){var A=this;var D=B.currentTarget;var C=A.getCalendarByNode(D);D.addClass(i);if(!C.get("visible")){A._setCalendarColor(C,C.get("color"))}},_onHoverOut:function(B){var A=this;var D=B.currentTarget;var C=A.getCalendarByNode(D);if(!C.get("visible")){A._clearCalendarColor(C)}D.removeClass(i)},_onSimpleMenuVisibleChange:function(B){var A=this;if(A.activeNode&&!B.newVal){A.activeNode.removeClass(s)}},_renderCalendars:function(){var A=this;var C=A.get("calendars");var B=A.get("contentBox");if(C.length===0){B.setContent(A.emptyMessageNode)}else{A.items=v.NodeList.create(t.parse({calendars:C}));B.setContent(A.items)}},_setCalendarColor:function(D,E){var A=this;var C=A.getCalendarNode(D);var B=C.one(c+y);B.setStyles({backgroundColor:E,borderColor:E})},_setCalendars:function(C){var A=this;var B=A.get("scheduler");z.each(C,function(E,D,G){var F=E;if(!v.instanceOf(E,Liferay.SchedulerCalendar)){F=new Liferay.SchedulerCalendar(E);C[D]=F}F.addTarget(A);F.set("scheduler",B)});return C},_setSimpleMenu:function(B){var A=this;return v.merge({align:{points:[v.WidgetPositionAlign.TL,v.WidgetPositionAlign.BL]},bubbleTargets:[A],constrain:true,host:A,items:[],plugins:[v.Plugin.OverlayAutohide],visible:false,width:290,zIndex:500},B||{})},_uiSetCalendars:function(B){var A=this;if(A.get("rendered")){A._renderCalendars()}}}});Liferay.CalendarList=o},"",{requires:["aui-template-deprecated","liferay-scheduler"]});AUI.add("liferay-calendar-simple-color-picker",function(j){var n=j.Array;var m=j.Lang;var k=j.getClassName;var p=k("simple-color-picker","item");var o=k("simple-color-picker","item","selected");var i=new j.Template('<tpl for="pallete">','<div class="',p,'" style="background-color: {.}',"; border-color:","{.};",'"></div>',"</tpl>");var l=j.Component.create({ATTRS:{color:{setter:function(q){return q.toUpperCase()},validator:m.isString,value:b},host:{value:null},pallete:{setter:function(q){return n.invoke(q,"toUpperCase")},validator:m.isArray,value:["#d96666","#e67399","#b373b3","#8c66d9","#668cb3","#668cd9","#59bfb3","#65ad89","#4cb052","#8cbf40","#bfbf4d","#e0c240","#f2a640","#e6804d","#be9494","#a992a9","#8997a5","#94a2be","#85aaa5","#a7a77d","#c4a883","#c7561e","#b5515d","#c244ab"]}},NAME:"simple-color-picker",UI_ATTRS:["color","pallete"],prototype:{renderUI:function(){var q=this;q._renderPallete()},bindUI:function(){var q=this;var r=q.get("contentBox");r.delegate("click",q._onClickColor,c+p,q)},_onClickColor:function(r){var q=this;var s=q.get("pallete");q.set("color",s[q.items.indexOf(r.currentTarget)])},_renderPallete:function(){var q=this;q.items=j.NodeList.create(i.parse({pallete:q.get("pallete")}));q.get("contentBox").setContent(q.items)},_uiSetColor:function(t){var q=this;var s=q.get("pallete");q.items.removeClass(o);var r=q.items.item(n.indexOf(s,t));if(r){r.addClass(o)}},_uiSetPallete:function(r){var q=this;if(q.get("rendered")){q._renderPallete()}}}});Liferay.SimpleColorPicker=l},"",{requires:["aui-base","aui-template-deprecated"]});AUI.add("liferay-calendar-reminders",function(i){var l=i.Lang;var j='<div class="calendar-portlet-reminder-section form-inline"><label class="checkbox"><input class="calendar-portlet-reminder-check" id="{portletNamespace}reminder{i}" name="{portletNamespace}reminder{i}" type="checkbox" <tpl if="!disabled">checked="checked"</tpl> /></label><label class="reminder-type" for="{portletNamespace}reminder{i}"><input id="{portletNamespace}reminderType{i}" name="{portletNamespace}reminderType{i}" type="hidden" value="email" />{email}</label><input class="input-mini reminder-value" name="{portletNamespace}reminderValue{i}" type="text" size="5" value="{time.value}" <tpl if="disabled">disabled="disabled"</tpl> /> <select class="reminder-duration span2" name="{portletNamespace}reminderDuration{i}" <tpl if="disabled">disabled="disabled"</tpl>><option value="60" <tpl if="time.desc == \'minutes\'">selected="selected"</tpl>>{minutes}</option><option value="3600" <tpl if="time.desc == \'hours\'">selected="selected"</tpl>>{hours}</option><option value="86400" <tpl if="time.desc == \'days\'">selected="selected"</tpl>>{days}</option><option value="604800" <tpl if="time.desc == \'weeks\'">selected="selected"</tpl>>{weeks}</option></select></div>';var k=i.Component.create({ATTRS:{portletNamespace:{value:""},strings:{value:{email:'\u0045\u006d\u0061\u0069\u006c',minutes:'\u004d\u0069\u006e\u0075\u0074\u0065\u0073',hours:'\u0048\u006f\u0075\u0072\u0073',days:'\u0044\u0061\u0079\u0073',weeks:'\u0057\u0065\u0065\u006b\u0073'}},values:{value:[{interval:10,type:Liferay.CalendarUtil.NOTIFICATION_DEFAULT_TYPE},{interval:60,type:Liferay.CalendarUtil.NOTIFICATION_DEFAULT_TYPE}],validator:l.isArray}},NAME:"reminders",UI_ATTRS:["values"],prototype:{initializer:function(){var m=this;m.tplReminder=new i.Template(j)},bindUI:function(){var m=this;var n=m.get("boundingBox");n.delegate("change",m._onChangeCheckbox,".calendar-portlet-reminder-check",m)},_onChangeCheckbox:function(o){var m=this;var q=o.target;var n=q.get("checked");var p=q.ancestor().siblings("input[type=text],select");p.set("disabled",!n);if(n){p.first().selectText()}},_uiSetValues:function(n){var t=this;var o=t.get("boundingBox");var m=t.get("portletNamespace");var u=t.get("strings");var p=[];var r=t.tplReminder;for(var q=0;q<n.length;q++){var s=n[q];p.push(r.parse(i.merge(u,{disabled:!s.interval,i:q,portletNamespace:m,time:Liferay.Time.getDescription(s.interval)})))}o.setContent(p.join(b))}}});Liferay.Reminders=k},"",{requires:["aui-base"]});AUI.add("liferay-calendar-date-picker-util",function(i){var j=i.Lang;var k=j.toInt;Liferay.DatePickerUtil={linkToSchedulerEvent:function(o,n,p){var l=this;var m=i.one(o).all("select");m.on("change",function(s){var u=s.currentTarget;var q=n.get(p);var v=m.indexOf(u);var r=[q.setMonth,q.setDate,q.setFullYear,q.setHours,q.setMinutes,q.setHours];var t=k(u.val());if((v===3)&&(q.getHours()>12)){t+=12}if(v===5){t=q.getHours()+((t===1)?12:-12)}r[v].call(q,t);n.get("scheduler").syncEventsUI()})},syncUI:function(m,v,o){var u=this;var p=m.one("select[name$="+v+"AmPm]");var l=m.one("select[name$="+v+"Hour]");var n=m.one("select[name$="+v+"Minute]");var t=Liferay.component(Liferay.CalendarUtil.PORTLET_NAMESPACE+v+"datePicker");if(t){t.calendar.deselectDates();t.calendar.selectDates(o);t.syncUI()}var r=o.getHours();var q=o.getMinutes();var s=(r<12)?0:1;if(s===1){r-=12;if(r===12){r=0}}p.val(s);l.val(r);n.val(q)}}},"",{requires:["aui-base"]});AUI.add("liferay-calendar-recurrence-util",function(i){Liferay.RecurrenceUtil={FREQUENCY:{DAILY:"DAILY",WEEKLY:"WEEKLY",MONTHLY:"MONTHLY",YEARLY:"YEARLY"},INTERVAL_LABELS:{DAILY:'\u0044\u0061\u0079\u0073',WEEKLY:'\u0057\u0065\u0065\u006b\u0073',MONTHLY:'\u004d\u006f\u006e\u0074\u0068\u0073',YEARLY:'\u0059\u0065\u0061\u0072\u0073'},MONTH_LABELS:['\u006a\u0061\u006e\u0075\u0061\u0072\u0079','\u0066\u0065\u0062\u0072\u0075\u0061\u0072\u0079','\u006d\u0061\u0072\u0063\u0068','\u0061\u0070\u0072\u0069\u006c','\u006d\u0061\u0079','\u006a\u0075\u006e\u0065','\u006a\u0075\u006c\u0079','\u0061\u0075\u0067\u0075\u0073\u0074','\u0073\u0065\u0070\u0074\u0065\u006d\u0062\u0065\u0072','\u006f\u0063\u0074\u006f\u0062\u0065\u0072','\u006e\u006f\u0076\u0065\u006d\u0062\u0065\u0072','\u0064\u0065\u0063\u0065\u006d\u0062\u0065\u0072'],closeConfirmationPanel:function(){var j=this;var k=j.confirmationPanel;if(k){k.hide()}},getSummary:function(k){var j=this;var n=[];if(k.interval==1){n.push(k.frequency)}else{n.push('\u0045\u0076\u0065\u0072\u0079'," {interval} {intervalLabel}")}if((k.frequency==j.FREQUENCY.WEEKLY)&&(k.weekdays.length>0)){n.push(a,f,'\u004f\u006e',h," {weekDays}")}if(k.count&&(k.endValue==="after")){n.push(", {count} ",'\u0074\u0069\u006d\u0065\u0073')}else{if(k.untilDate&&(k.endValue==="on")){var m=k.untilDate;n.push(e,a,f,'\u0075\u006e\u0074\u0069\u006c',h,i.Lang.sub(" {month} {date}, {year}",{date:m.getDate(),month:j.MONTH_LABELS[m.getMonth()],year:m.getFullYear()}))}}var l=i.Lang.sub(n.join(b),{count:k.count,interval:k.interval,intervalLabel:j.INTERVAL_LABELS[k.frequency],weekDays:k.weekdays.join(", ")});return i.Lang.String.capitalize(l)},openConfirmationPanel:function(q,l,m,j,p,s){var t=this;var u;var n;if(q==="delete"){u='\u0044\u0065\u006c\u0065\u0074\u0065\u0020\u0052\u0065\u0063\u0075\u0072\u0072\u0069\u006e\u0067\u0020\u0045\u0076\u0065\u006e\u0074';n='\u0057\u006f\u0075\u006c\u0064\u0020\u0079\u006f\u0075\u0020\u006c\u0069\u006b\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u006c\u0065\u0074\u0065\u0020\u006f\u006e\u006c\u0079\u0020\u0074\u0068\u0069\u0073\u0020\u0065\u0076\u0065\u006e\u0074\u002c\u0020\u0061\u006c\u006c\u0020\u0065\u0076\u0065\u006e\u0074\u0073\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0073\u0065\u0072\u0069\u0065\u0073\u002c\u0020\u006f\u0072\u0020\u0074\u0068\u0069\u0073\u0020\u0061\u006e\u0064\u0020\u0061\u006c\u006c\u0020\u0066\u0075\u0074\u0075\u0072\u0065\u0020\u0065\u0076\u0065\u006e\u0074\u0073\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0073\u0065\u0072\u0069\u0065\u0073\u003f'}else{u='\u0043\u0068\u0061\u006e\u0067\u0065\u0020\u0052\u0065\u0063\u0075\u0072\u0072\u0069\u006e\u0067\u0020\u0045\u0076\u0065\u006e\u0074';n='\u0057\u006f\u0075\u006c\u0064\u0020\u0079\u006f\u0075\u0020\u006c\u0069\u006b\u0065\u0020\u0074\u006f\u0020\u0063\u0068\u0061\u006e\u0067\u0065\u0020\u006f\u006e\u006c\u0079\u0020\u0074\u0068\u0069\u0073\u0020\u0065\u0076\u0065\u006e\u0074\u002c\u0020\u0061\u006c\u006c\u0020\u0065\u0076\u0065\u006e\u0074\u0073\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0073\u0065\u0072\u0069\u0065\u0073\u002c\u0020\u006f\u0072\u0020\u0074\u0068\u0069\u0073\u0020\u0061\u006e\u0064\u0020\u0061\u006c\u006c\u0020\u0066\u0075\u0074\u0075\u0072\u0065\u0020\u0065\u0076\u0065\u006e\u0074\u0073\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0073\u0065\u0072\u0069\u0065\u0073\u003f'}var o=[n];if((q==="delete")&&l){o.push(i.Lang.sub("<br/><br/><b>{0}</b>",['\u0044\u0065\u006c\u0065\u0074\u0069\u006e\u0067\u0020\u0074\u0068\u0069\u0073\u0020\u0065\u0076\u0065\u006e\u0074\u0020\u0077\u0069\u006c\u006c\u0020\u0063\u0061\u006e\u0063\u0065\u006c\u0020\u0074\u0068\u0065\u0020\u006d\u0065\u0065\u0074\u0069\u006e\u0067\u0020\u0077\u0069\u0074\u0068\u0020\u0079\u006f\u0075\u0072\u0020\u0067\u0075\u0065\u0073\u0074\u0073\u002e']))}var k=t.confirmationPanel;if(!k){var r=[{on:{click:function(w,v){k.onlyThisInstanceFn.apply(k,arguments)}},label:'\u004f\u006e\u006c\u0079\u0020\u0054\u0068\u0069\u0073\u0020\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065'},{on:{click:function(w,v){k.allFollowingFn.apply(k,arguments)}},label:'\u0041\u006c\u006c\u0020\u0046\u006f\u006c\u006c\u006f\u0077\u0069\u006e\u0067'},{on:{click:function(w,v){k.allEventsInFn.apply(k,arguments)}},label:'\u0041\u006c\u006c\u0020\u0045\u0076\u0065\u006e\u0074\u0073\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0053\u0065\u0072\u0069\u0065\u0073'},{on:{click:function(w,v){k.cancelFn.apply(k,arguments)}},label:'\u0043\u0061\u006e\u0063\u0065\u006c\u0020\u0054\u0068\u0069\u0073\u0020\u0043\u0068\u0061\u006e\u0067\u0065'}];k=Liferay.Util.Window.getWindow({dialog:{bodyContent:o.join(""),height:200,toolbars:{footer:r},width:700},title:u});t.confirmationPanel=k}k.onlyThisInstanceFn=m;k.allFollowingFn=j;k.allEventsInFn=p;k.cancelFn=s||k.hide;k.render().show()}}},"",{requires:["aui-base","liferay-util-window"]});AUI.add("liferay-calendar-message-util",function(i){Liferay.CalendarMessageUtil={confirmationPanel:null,confirm:function(n,o,q,l,k){var j=this;var p=j.confirmationPanel;if(!p){var m=[{on:{click:function(s,r){p.yesFn.apply(p,arguments)}},label:o},{on:{click:function(s,r){p.noFn.apply(p,arguments)}},label:q}];p=Liferay.Util.Window.getWindow({dialog:{bodyContent:n,toolbars:{footer:m},},title:'\u0041\u0072\u0065\u0020\u0079\u006f\u0075\u0020\u0073\u0075\u0072\u0065\u003f'});j.confirmationPanel=p}p.yesFn=l;p.noFn=k||p.close;return p.render().show()}}},"",{requires:["liferay-util-window"]})}());